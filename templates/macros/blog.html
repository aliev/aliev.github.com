{% macro render_blog_post(post, from_index=false) %}
  <div class="blog-post">
  {% if from_index %}
    <h1><a href="{{ post|url }}">{{ post.title }}</a></h1>
  {% else %}
    <h1>{{ post.title }}</h1>
  {% endif %}
  <p class="meta">
    Ali Aliyev
    [{{ post.pub_date }}]
  </p>
  {% if post.body.toc %}
    {% if post.toc %}
      <h1>{{ post.toc }}</h1>
    {% endif %}
  <ul class="toc">
      {% for item in post.body.toc recursive %}
      <li><a href="#{{ item.anchor }}">{{ item.title }}</a>{%
      if item.children %}<ul>{{ loop(item.children) }}</ul>{% endif %}
      {% endfor %}
  </ul>
  {% endif %}
  {{ post.body }}
  </div>
{% endmacro %}

{% macro render_blog_post_without_body(post, from_index=false) %}
  <div class="blog-post">
  {% if from_index %}
  <h4>{% if post.pub_date %}[{{ post.pub_date }}]{% endif %} <a href="{{ post|url }}">{{ post.title }}</a></h4>
  {% else %}
    <h4>{{ post.title }}</h4>
  {% endif %}
    {{ post.description }}
  </div>
{% endmacro %}
